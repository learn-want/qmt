# 双均线交叉策略

## 策略概述

双均线交叉策略是一种经典的趋势跟踪策略，通过观察快速移动平均线与慢速移动平均线的交叉情况来判断市场趋势的转变，并生成交易信号。本策略在传统双均线系统的基础上，结合RSI指标进行信号过滤，提高了交易信号的质量。

核心理念：

1. **趋势跟踪**：利用不同周期的移动平均线来识别价格趋势的变化
2. **信号过滤**：使用RSI指标过滤掉可能的虚假信号
3. **动态仓位**：根据趋势强度动态调整持仓比例

## 策略实现

本策略在`ma_cross_strategy.py`中实现，主要包括以下核心功能：

1. **均线交叉识别**：计算并比较快速与慢速移动平均线的位置关系，识别金叉和死叉
2. **RSI过滤**：使用RSI指标过滤交易信号，只在RSI处于合理区间时进行交易
3. **趋势强度评估**：评估当前趋势的强度，动态调整仓位大小
4. **交易信号生成**：根据均线交叉和RSI指标生成买入或卖出信号

## 策略参数

策略参数在`config/settings.yaml`中配置，主要包括：

| 参数名 | 默认值 | 说明 |
| --- | --- | --- |
| ma_short | 5 | 短期均线周期，周期越短对价格变化越敏感 |
| ma_long | 20 | 长期均线周期，周期越长越能反映长期趋势 |
| rsi_period | 14 | RSI计算周期 |
| rsi_buy | 30 | RSI买入阈值，低于此值视为超卖区域 |
| rsi_sell | 70 | RSI卖出阈值，高于此值视为超买区域 |

## 交易逻辑

### 买入条件

同时满足以下条件时产生买入信号：

1. 短期均线从下方穿过长期均线（金叉）
2. RSI指标低于买入阈值（默认30），表明市场处于超卖状态

### 卖出条件

满足以下任一条件时产生卖出信号：

1. 短期均线从上方穿过长期均线（死叉）
2. RSI指标高于卖出阈值（默认70），表明市场处于超买状态

### 仓位控制

策略根据趋势强度动态调整仓位：

- 当趋势不明显时（趋势强度 < 0.02），减少50%的仓位
- 遵循系统风险限额设置，控制单个标的的最大持仓比例

## 使用方法
### 1. 配置交易标的

在`config/ma_cross_settings.yaml`中配置交易标的池：

```yaml
data:
  universe: [              # 交易标的池
    "000001.SZ",          # 平安银行
    "600000.SH"           # 浦发银行
    # 添加更多股票...
  ]
```

### 2. 配置策略参数

在`config/ma_cross_settings.yaml`中配置策略参数：

```yaml
strategy_params:
  ma_short: 5              # 短期均线周期
  ma_long: 20              # 长期均线周期
  rsi_period: 14           # RSI计算周期
  rsi_buy: 30              # RSI买入阈值
  rsi_sell: 70             # RSI卖出阈值
```

### 3. 运行策略

使用主程序入口启动策略：

```bash
# 回测模式 - 自动加载 config/ma_cross_settings.yaml
python main.py --mode backtest --strategy ma_cross_strategy

# 回测模式 - 显式指定配置文件
python main.py --mode backtest --strategy ma_cross_strategy --config config/ma_cross_settings.yaml

# 回测模式 - 覆盖回测参数
python main.py --mode backtest --strategy ma_cross_strategy --start_date 2023-06-01 --end_date 2023-12-31 --initial_capital 500000

# 实盘模式
python main.py --mode live --strategy ma_cross_strategy
```

系统会自动查找并加载`config/ma_cross_settings.yaml`配置文件，并将其与通用配置`config/common_settings.yaml`合并。如果需要使用其他配置文件，可以通过`--config`参数指定。

## 策略优化方向

1. **参数优化**：通过回测寻找最优的均线周期和RSI阈值组合
2. **多指标结合**：引入MACD、布林带等其他技术指标，构建更复杂的信号系统
3. **止损机制**：增加动态止损机制，控制单笔交易的最大亏损
4. **时间过滤**：根据不同的时间段（如开盘、收盘前）调整策略参数或交易行为
5. **波动率适应**：根据市场波动率动态调整参数，适应不同市场环境

## 风险提示

1. 均线交叉策略在震荡市场中可能产生频繁的虚假信号，导致过度交易
2. 趋势跟踪策略通常存在滞后性，可能错过趋势初期的部分收益
3. 策略效果受参数选择影响较大，不同市场环境可能需要不同的参数设置
4. 本策略仅供学习研究使用，不构成投资建议